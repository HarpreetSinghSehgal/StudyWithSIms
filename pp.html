<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Projectile Simulator</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    text-align: center;
    background: linear-gradient(#87CEEB, #E0FFFF);
  }
  h1 {
    margin: 10px 0;
    font-size: clamp(18px, 5vw, 28px);
  }
  #controls {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
    padding: 10px;
  }
  #controls label {
    font-size: clamp(12px, 3vw, 16px);
  }
  #controls input {
    width: 80px;
    padding: 5px;
    font-size: clamp(12px, 3vw, 16px);
  }
  #controls button {
    padding: 8px 15px;
    font-size: clamp(12px, 3vw, 16px);
    border: none;
    border-radius: 6px;
    background: #4CAF50;
    color: white;
    cursor: pointer;
  }
  #controls button:hover {
    background: #45a049;
  }
  canvas {
    display: block;
    margin: 10px auto;
    background: #cce7ff;
    border: 2px solid #333;
    border-radius: 10px;
    max-width: 100%;
    height: auto;
  }
  #metrics {
    font-size: clamp(12px, 3vw, 16px);
    margin: 10px 0;
  }
</style>
</head>
<body>
  <h1>Projectile Motion Simulator</h1>
  <div id="controls">
    <label>Velocity (m/s): <input type="number" id="velocity" value="50"></label>
    <label>Angle (Â°): <input type="number" id="angle" value="45"></label>
    <button onclick="launch()">Launch</button>
  </div>
  <canvas id="simCanvas"></canvas>
  <div id="metrics"></div>

<script>
const canvas = document.getElementById("simCanvas");
const ctx = canvas.getContext("2d");

let canvasWidth, canvasHeight, groundY;
let velocity = 50, angle = 45;
let g = 9.8;
let trajectory = [];
let animationId = null;

function resizeCanvas() {
  canvasWidth = window.innerWidth * 0.95;
  canvasHeight = Math.min(500, window.innerHeight * 0.6);
  canvas.width = canvasWidth;
  canvas.height = canvasHeight;
  groundY = canvasHeight * 0.85;
  computeTrajectory();
  drawScene();
}

function computeTrajectory() {
  trajectory = [];
  let rad = angle * Math.PI / 180;
  let vx = velocity * Math.cos(rad);
  let vy = velocity * Math.sin(rad);
  let t = 0, dt = 0.05;

  while (true) {
    let x = vx * t;
    let y = vy * t - 0.5 * g * t * t;
    if (y < 0) break;
    trajectory.push({ x: x, y: y });
    t += dt;
  }

  let range = vx * (2 * vy / g);
  let maxH = (vy * vy) / (2 * g);
  let tFlight = (2 * vy) / g;

  document.getElementById("metrics").innerHTML =
    `Range: ${range.toFixed(2)} m | Max Height: ${maxH.toFixed(2)} m | Time of Flight: ${tFlight.toFixed(2)} s`;
}

function drawScene() {
  ctx.clearRect(0, 0, canvasWidth, canvasHeight);

  // Ground
  ctx.fillStyle = "green";
  ctx.fillRect(0, groundY, canvasWidth, canvasHeight - groundY);

  // Trajectory
  ctx.strokeStyle = "red";
  ctx.beginPath();
  for (let i = 0; i < trajectory.length; i++) {
    let px = trajectory[i].x * 5; // scale for visibility
    let py = groundY - trajectory[i].y * 5;
    if (i === 0) ctx.moveTo(px, py);
    else ctx.lineTo(px, py);
  }
  ctx.stroke();
}

function launch() {
  velocity = parseFloat(document.getElementById("velocity").value);
  angle = parseFloat(document.getElementById("angle").value);
  computeTrajectory();
  animate();
}

function animate() {
  if (animationId) cancelAnimationFrame(animationId);
  let i = 0;

  function frame() {
    drawScene();
    if (i < trajectory.length) {
      let px = trajectory[i].x * 5;
      let py = groundY - trajectory[i].y * 5;

      ctx.fillStyle = "blue";
      ctx.beginPath();
      ctx.arc(px, py, 6, 0, 2 * Math.PI);
      ctx.fill();

      i++;
      animationId = requestAnimationFrame(frame);
    }
  }
  frame();
}

window.onload = resizeCanvas;
window.onresize = resizeCanvas;
</script>
</body>
</html>
